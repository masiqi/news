/**
 * amis-core v6.13.0
 * Copyright 2018-2025 fex
 */

import { __awaiter, __generator } from 'tslib';
import { registerAction } from './Action.js';

/**
 * 状态更新动作
 *
 * @export
 * @class StatusAction
 * @implements {Action}
 */
var StatusAction = /** @class */ (function () {
    function StatusAction() {
    }
    StatusAction.prototype.run = function (action, renderer, event) {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function () {
            var key, visibility, usability;
            return __generator(this, function (_c) {
                key = action.componentId || action.componentName;
                // 显隐&状态控制
                if (['show', 'hidden', 'visibility'].includes(action.actionType)) {
                    visibility = action.actionType === 'visibility'
                        ? (_a = action.args) === null || _a === void 0 ? void 0 : _a.value
                        : action.actionType === 'show';
                    return [2 /*return*/, renderer.props.statusStore.setVisible(key, visibility)];
                }
                else if (['static', 'nonstatic'].includes(action.actionType)) {
                    return [2 /*return*/, renderer.props.statusStore.setStatic(key, action.actionType === 'static')];
                }
                else if (['enabled', 'disabled', 'usability'].includes(action.actionType)) {
                    usability = action.actionType === 'usability'
                        ? !((_b = action.args) === null || _b === void 0 ? void 0 : _b.value)
                        : action.actionType === 'disabled';
                    return [2 /*return*/, renderer.props.statusStore.setDisable(key, usability)];
                }
                return [2 /*return*/];
            });
        });
    };
    return StatusAction;
}());
registerAction('status', new StatusAction());

export { StatusAction };
