/**
 * amis-core v6.13.0
 * Copyright 2018-2025 fex
 */

import { __assign } from 'tslib';
import { getVariable } from './getVariable.js';
import { setVariable } from './object.js';

/**
 * 合并两次数据，满足轮训时总合并数据的需求，比如日志接口，每次返回一部分，但是前端组件需要全部展示。
 *
 * @param data
 * @param origin
 * @param keys
 */
function concatData(data, origin, keys) {
    keys = Array.isArray(keys)
        ? keys
        : keys
            .split(',')
            .map(function (item) { return item.trim(); })
            .filter(function (item) { return item; });
    var newData = __assign({}, data);
    var modified = false;
    origin &&
        keys.forEach(function (key) {
            var prev = getVariable(origin, key);
            var next = getVariable(data, key);
            var args = [];
            typeof prev !== 'undefined' && args.push(prev);
            typeof next !== 'undefined' && args.push(next);
            modified = true;
            setVariable(newData, key, [].concat.apply([], args));
        });
    return modified ? newData : data;
}

export { concatData };
