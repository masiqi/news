/**
 * amis-core v6.13.0
 * Copyright 2018-2025 fex
 */

import { __assign } from 'tslib';
import React from 'react';
import { StatusStore } from './store/status.js';
import { destroy } from 'mobx-state-tree';

function StatusScopedWrapper(_a) {
    var children = _a.children;
    var store = React.useMemo(function () { return StatusStore.create({}); }, []);
    React.useEffect(function () {
        return function () {
            destroy(store);
        };
    }, []);
    return children({ statusStore: store });
}
function StatusScoped(ComposedComponent) {
    var wrapped = function (props, ref) {
        return (React.createElement(StatusScopedWrapper, null, function (_a) {
            var statusStore = _a.statusStore;
            return (React.createElement(ComposedComponent, __assign({}, props, { statusStore: statusStore, ref: ref })));
        }));
    };
    return React.forwardRef(wrapped);
}

export { StatusScoped, StatusScopedWrapper };
