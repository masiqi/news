/**
 * amis-core v6.13.0
 * Copyright 2018-2025 fex
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

require('react');
var string2regExp = require('./string2regExp.js');

var __react_jsx__ = require('react');
var _J$X_ = (__react_jsx__["default"] || __react_jsx__).createElement;
(__react_jsx__["default"] || __react_jsx__).Fragment;
function highlight(text, input, hlClassName) {
    if (hlClassName === void 0) { hlClassName = 'is-matched'; }
    if (!input) {
        return text;
    }
    text = String(text);
    var reg = string2regExp.string2regExp(input, false, true);
    if (!reg.test(text)) {
        return text;
    }
    var dom = [];
    var start = 0;
    var match = null;
    reg.lastIndex = 0;
    while ((match = reg.exec(text))) {
        var prev = text.substring(start, match.index);
        prev && dom.push(_J$X_("span", { key: dom.length }, prev));
        match[0] &&
            dom.push(_J$X_("span", { className: hlClassName, key: dom.length }, match[0]));
        start = match.index + match[0].length;
    }
    var rest = text.substring(start);
    rest && dom.push(_J$X_("span", { key: dom.length }, rest));
    // const parts = text.split(reg);
    // parts.forEach((text: string, index) => {
    //   text && dom.push(<span key={index}>{text}</span>);
    //   dom.push(
    //     <span className={hlClassName} key={`${index}-hl`}>
    //       {input}
    //     </span>
    //   );
    // });
    // dom.pop();
    return dom;
}

exports.highlight = highlight;
