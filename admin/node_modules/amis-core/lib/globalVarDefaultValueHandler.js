/**
 * amis-core v6.13.0
 * Copyright 2018-2025 fex
 */

'use strict';

var tslib = require('tslib');
var globalVar = require('./globalVar.js');

/**
 * 格式化默认值
 */
globalVar.registerGlobalVariableHandler(function (variable, context) {
    var _a;
    if (variable.defaultValue && typeof variable.defaultValue === 'string') {
        var defaultValue = variable.defaultValue;
        try {
            var value = defaultValue;
            var valueType = (_a = variable.valueSchema) === null || _a === void 0 ? void 0 : _a.type;
            if (valueType && ['number', 'array', 'object'].includes(valueType)) {
                value = JSON.parse(defaultValue);
            }
            return tslib.__assign(tslib.__assign({}, variable), { defaultValue: value });
        }
        catch (e) {
            // do nothing
        }
    }
});
