/**
 * 缓存文本大小，避免重复计算
 */
var textSizeCache = new Map();
/**
 * 测量字体大小，这个会计算最终真实大小及字体大小，带缓存，需要自己 save state
 */
function measureTextWithCache(ctx, font, text) {
    var key = "".concat(font, "---").concat(text);
    if (textSizeCache.has(key)) {
        return textSizeCache.get(key);
    }
    ctx.font = font;
    var measureSize = ctx.measureText(text);
    var size = {
        width: measureSize.width,
        boundingWidth: Math.abs(measureSize.actualBoundingBoxRight) +
            Math.abs(measureSize.actualBoundingBoxLeft),
        height: measureSize.actualBoundingBoxAscent +
            measureSize.actualBoundingBoxDescent,
        fontHeight: measureSize.fontBoundingBoxAscent + measureSize.fontBoundingBoxDescent
    };
    textSizeCache.set(key, size);
    return size;
}
function inValidTextSizeCache() {
    textSizeCache.clear();
}

export { inValidTextSizeCache, measureTextWithCache };
