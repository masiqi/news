'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

/**
 * 检查字体是否可用，来自 https://www.samclarke.com/javascript-is-font-available/
 * 这个检查只检查宽度，并不完全准确
 */
var testString = Array(15).join('abcdefghijklmnopqrstuvwxyz0123456789中');
var isFontAvailable = (function () {
    // 测试环境
    if (!document) {
        return function () { return true; };
    }
    var body = document.body;
    var container = document.createElement('span');
    container.innerHTML = testString;
    container.style.cssText = [
        'position:absolute',
        'width:auto',
        'font-size:128px',
        'left:-99999px'
    ].join(' !important;');
    var getWidth = function (fontFamily) {
        container.style.fontFamily = fontFamily;
        body.appendChild(container);
        var width = container.clientWidth;
        body.removeChild(container);
        return width;
    };
    var monoWidth = getWidth('monospace');
    var serifWidth = getWidth('serif');
    var sansWidth = getWidth('sans-serif');
    return function (font) {
        return (monoWidth !== getWidth(font + ',monospace') ||
            sansWidth !== getWidth(font + ',sans-serif') ||
            serifWidth !== getWidth(font + ',serif'));
    };
})();

exports.isFontAvailable = isFontAvailable;
