(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(8256),r(2029),r(5866);var s=r(3191),n=r(8716),o=r(7922),i=r.n(o),a=r(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8256)),"/work/llm/news/frontend/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/work/llm/news/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/work/llm/news/frontend/src/app/dashboard/page.tsx"],p="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7954:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4967:(e,t,r)=>{Promise.resolve().then(r.bind(r,1625))},6463:()=>{},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},1625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(326),n=r(7577),o=r(5047),i=r(8069);function a(e){return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function l(){let e=(0,o.useRouter)(),[t,r]=(0,n.useState)("content"),[l,d]=(0,n.useState)([]),[c,p]=(0,n.useState)([]),[x,h]=(0,n.useState)(!0),[u,m]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[y,j]=(0,n.useState)(""),v=async()=>{h(!0),m("");try{if("sources"===t){let e=await i.h.getSources();e.success&&d(e.data||[])}else{let e=await i.h.getContent();e.success&&p(e.data||[])}}catch(e){m("加载数据失败"),console.error("Load data error:",e)}finally{h(!1)}},b=async()=>{if(y.trim())try{(await fetch("https://moxiang-distill-api.masiqi.workers.dev/api/sources",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({url:y})})).ok?(j(""),f(!1),v()):m("添加 RSS 源失败")}catch(e){m("添加 RSS 源失败"),console.error("Add source error:",e)}};return(0,s.jsxs)("div",{style:{minHeight:"100vh"},children:[s.jsx("header",{className:"header",children:s.jsx("div",{className:"container",children:(0,s.jsxs)("nav",{className:"nav",children:[s.jsx("div",{className:"logo",children:"墨香蒸馏"}),(0,s.jsxs)("div",{className:"nav-links",children:[s.jsx("a",{href:"/dashboard",children:"仪表板"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("auth_token"),e.push("/")},className:"btn btn-secondary",style:{padding:"8px 16px"},children:"退出登录"})]})]})})}),(0,s.jsxs)("div",{className:"container",style:{paddingTop:"32px"},children:[s.jsx("div",{style:{marginBottom:"24px",borderBottom:"2px solid #eee"},children:(0,s.jsxs)("div",{style:{display:"flex",gap:"32px"},children:[s.jsx("button",{onClick:()=>r("content"),style:{padding:"12px 0",border:"none",background:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",borderBottom:"content"===t?"2px solid #0070f3":"2px solid transparent",color:"content"===t?"#0070f3":"#666",marginBottom:"-2px"},children:"内容"}),s.jsx("button",{onClick:()=>r("sources"),style:{padding:"12px 0",border:"none",background:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",borderBottom:"sources"===t?"2px solid #0070f3":"2px solid transparent",color:"sources"===t?"#0070f3":"#666",marginBottom:"-2px"},children:"RSS 源"})]})}),u&&s.jsx("div",{style:{padding:"12px 16px",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"20px",fontSize:"14px"},children:u}),"sources"===t&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"700"},children:"我的 RSS 源"}),s.jsx("button",{onClick:()=>f(!g),className:"btn btn-primary",children:g?"取消":"添加 RSS 源"})]}),g&&(0,s.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"添加新的 RSS 源"}),s.jsx("input",{type:"url",className:"input",value:y,onChange:e=>j(e.target.value),placeholder:"https://example.com/rss",style:{marginBottom:"12px"}}),s.jsx("button",{onClick:b,className:"btn btn-primary",children:"确认添加"})]}),x?s.jsx("div",{className:"card",children:"加载中..."}):0===l.length?s.jsx("div",{className:"card",children:s.jsx("p",{style:{color:"#666",textAlign:"center"},children:"还没有添加 RSS 源，点击上方按钮添加第一个吧！"})}):l.map(e=>s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,s.jsxs)("div",{style:{flex:1},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:e.title}),e.description&&s.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"8px"},children:e.description}),s.jsx("p",{style:{fontSize:"12px",color:"#999"},children:e.url}),e.lastFetchAt&&(0,s.jsxs)("p",{style:{fontSize:"12px",color:"#999",marginTop:"8px"},children:["最后抓取: ",a(e.lastFetchAt)]})]}),s.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",background:e.isActive?"#e8f5e9":"#f5f5f5",color:e.isActive?"#2e7d32":"#666"},children:e.isActive?"活跃":"已暂停"})]})},e.id))]}),"content"===t&&(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},children:"最新内容"}),x?s.jsx("div",{className:"card",children:"加载中..."}):0===c.length?s.jsx("div",{className:"card",children:s.jsx("p",{style:{color:"#666",textAlign:"center"},children:"还没有内容，添加 RSS 源后系统会自动抓取内容。"})}):c.map(e=>(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.title})}),e.summary&&s.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"12px",lineHeight:"1.6"},children:e.summary}),s.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"8px"},children:e.tags&&e.tags.map((e,t)=>s.jsx("span",{style:{padding:"2px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"12px",color:"#666"},children:e},t))}),(0,s.jsxs)("p",{style:{fontSize:"12px",color:"#999"},children:["发布于: ",a(e.publishedAt)]})]},e.id))]})]})]})}},8069:(e,t,r)=>{"use strict";async function s(e,t={}){let r={"Content-Type":"application/json",...t.headers||{}},s=await fetch(`https://moxiang-distill-api.masiqi.workers.dev${e}`,{...t,headers:r});if(!s.ok)throw Error(`API错误: ${s.statusText}`);return s.json()}r.d(t,{h:()=>n});let n={register:e=>s("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)}),login:e=>s("/api/v1/auth/login",{method:"POST",body:JSON.stringify(e)}),getSources:()=>s("/api/v1/sources"),getPublicSources:()=>s("/api/v1/sources/public"),getContent:()=>s("/api/v1/content")}},8256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/work/llm/news/frontend/src/app/dashboard/page.tsx#default`)},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>n});var s=r(9510);r(5023);let n={title:"墨香蒸馏 - AI 新闻平台",description:"基于 AI 的个性化新闻聚合与推送平台"};function o({children:e}){return s.jsx("html",{lang:"zh-CN",children:s.jsx("body",{children:e})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[819],()=>r(4062));module.exports=s})();