(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2371:function(t,e,n){Promise.resolve().then(n.bind(n,8991))},9376:function(t,e,n){"use strict";var o=n(5475);n.o(o,"useRouter")&&n.d(e,{useRouter:function(){return o.useRouter}})},8991:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return a}});var o=n(7437),i=n(2265),r=n(9376),s=n(1837);function a(){let t=(0,r.useRouter)(),[e,n]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,p]=(0,i.useState)(!1),h=async n=>{n.preventDefault(),u(""),p(!0);try{let n=await s.h.login({email:e,password:a});n.success&&n.token?(localStorage.setItem("auth_token",n.token),t.push("/dashboard")):u(n.message||"登录失败")}catch(t){u("登录失败，请检查邮箱和密码"),console.error("Login error:",t)}finally{p(!1)}};return(0,o.jsx)("div",{className:"container",style:{maxWidth:"480px",paddingTop:"80px"},children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",textAlign:"center"},children:"登录"}),(0,o.jsx)("p",{style:{color:"#666",textAlign:"center",marginBottom:"32px"},children:"登录到墨香蒸馏平台"}),c&&(0,o.jsx)("div",{style:{padding:"12px 16px",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"20px",fontSize:"14px"},children:c}),(0,o.jsxs)("form",{onSubmit:h,children:[(0,o.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"邮箱"}),(0,o.jsx)("input",{type:"email",className:"input",value:e,onChange:t=>n(t.target.value),placeholder:"your@email.com",required:!0})]}),(0,o.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"密码"}),(0,o.jsx)("input",{type:"password",className:"input",value:a,onChange:t=>l(t.target.value),placeholder:"••••••••",required:!0})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"16px"},disabled:d,children:d?"登录中...":"登录"}),(0,o.jsxs)("div",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:["还没有账号？"," ",(0,o.jsx)("a",{href:"/register",style:{color:"#0070f3",fontWeight:"500"},children:"立即注册"})]})]})]})})}},1837:function(t,e,n){"use strict";async function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("auth_token"),o={"Content-Type":"application/json",...e.headers||{}};n&&(o.Authorization="Bearer ".concat(n));let i=await fetch("".concat("https://moxiang-distill-api.masiqi.workers.dev").concat(t),{...e,headers:o});if(!i.ok)throw Error("API错误: ".concat(i.statusText));return i.json()}n.d(e,{h:function(){return i}});let i={register:t=>o("/api/v1/auth/register",{method:"POST",body:JSON.stringify(t)}),login:t=>o("/api/v1/auth/login",{method:"POST",body:JSON.stringify(t)}),getSources:()=>o("/api/v1/sources"),getPublicSources:()=>o("/api/v1/sources/public"),getContent:()=>o("/api/v1/content")}}},function(t){t.O(0,[971,117,744],function(){return t(t.s=2371)}),_N_E=t.O()}]);