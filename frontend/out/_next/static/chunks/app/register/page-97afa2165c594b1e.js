(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6315:function(e,t,n){Promise.resolve().then(n.bind(n,564))},9376:function(e,t,n){"use strict";var i=n(5475);n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})},564:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(7437),o=n(2265),r=n(9376),s=n(1837);function a(){let e=(0,r.useRouter)(),[t,n]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(""),[p,d]=(0,o.useState)(""),[h,x]=(0,o.useState)(""),[g,m]=(0,o.useState)(!1),f=async n=>{if(n.preventDefault(),x(""),c!==p){x("两次输入的密码不一致");return}if(c.length<6){x("密码长度至少为6位");return}m(!0);try{let n=await s.h.register({email:a,password:c,username:t});n.success&&n.token?(localStorage.setItem("auth_token",n.token),e.push("/dashboard")):x(n.message||"注册失败")}catch(e){x("注册失败，请稍后重试"),console.error("Register error:",e)}finally{m(!1)}};return(0,i.jsx)("div",{className:"container",style:{maxWidth:"480px",paddingTop:"80px"},children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",textAlign:"center"},children:"注册"}),(0,i.jsx)("p",{style:{color:"#666",textAlign:"center",marginBottom:"32px"},children:"创建您的墨香蒸馏账号"}),h&&(0,i.jsx)("div",{style:{padding:"12px 16px",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"20px",fontSize:"14px"},children:h}),(0,i.jsxs)("form",{onSubmit:f,children:[(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"用户名"}),(0,i.jsx)("input",{type:"text",className:"input",value:t,onChange:e=>n(e.target.value),placeholder:"您的用户名",required:!0})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"邮箱"}),(0,i.jsx)("input",{type:"email",className:"input",value:a,onChange:e=>l(e.target.value),placeholder:"your@email.com",required:!0})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"密码"}),(0,i.jsx)("input",{type:"password",className:"input",value:c,onChange:e=>u(e.target.value),placeholder:"至少6位",required:!0})]}),(0,i.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"确认密码"}),(0,i.jsx)("input",{type:"password",className:"input",value:p,onChange:e=>d(e.target.value),placeholder:"再次输入密码",required:!0})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"16px"},disabled:g,children:g?"注册中...":"注册"}),(0,i.jsxs)("div",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:["已有账号？"," ",(0,i.jsx)("a",{href:"/login",style:{color:"#0070f3",fontWeight:"500"},children:"立即登录"})]})]})]})})}},1837:function(e,t,n){"use strict";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("auth_token"),i={"Content-Type":"application/json",...t.headers||{}};n&&(i.Authorization="Bearer ".concat(n));let o=await fetch("".concat("https://moxiang-distill-api.masiqi.workers.dev").concat(e),{...t,headers:i});if(!o.ok)throw Error("API错误: ".concat(o.statusText));return o.json()}n.d(t,{h:function(){return o}});let o={register:e=>i("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),login:e=>i("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),getSources:()=>i("/api/sources"),getPublicSources:()=>i("/api/sources/public"),getContent:()=>i("/api/content")}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6315)}),_N_E=e.O()}]);