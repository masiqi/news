(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6315:function(e,t,n){Promise.resolve().then(n.bind(n,564))},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},564:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),i=n(2265),o=n(9376),s=n(1837);function a(){let e=(0,o.useRouter)(),[t,n]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[p,d]=(0,i.useState)(""),[h,x]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),f=async n=>{if(n.preventDefault(),x(""),c.length<8){x("密码至少需要8位字符");return}if(!/(?=.*[a-zA-Z])(?=.*\d)/.test(c)){x("密码必须包含字母和数字");return}if(c!==p){x("两次输入的密码不一致");return}m(!0);try{let n=await s.h.register({email:a,password:c,username:t});n.success&&n.token?(localStorage.setItem("auth_token",n.token),e.push("/dashboard")):x(n.message||"注册失败")}catch(e){x((null==e?void 0:e.message)||"注册失败，请检查网络连接"),console.error("Register error:",e)}finally{m(!1)}};return(0,r.jsx)("div",{className:"container",style:{maxWidth:"480px",paddingTop:"80px"},children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",textAlign:"center"},children:"注册"}),(0,r.jsx)("p",{style:{color:"#666",textAlign:"center",marginBottom:"32px"},children:"创建您的墨香蒸馏账号"}),h&&(0,r.jsx)("div",{style:{padding:"12px 16px",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"20px",fontSize:"14px"},children:h}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"用户名"}),(0,r.jsx)("input",{type:"text",className:"input",value:t,onChange:e=>n(e.target.value),placeholder:"您的用户名",required:!0})]}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"邮箱"}),(0,r.jsx)("input",{type:"email",className:"input",value:a,onChange:e=>l(e.target.value),placeholder:"your@email.com",required:!0})]}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"密码"}),(0,r.jsx)("input",{type:"password",className:"input",value:c,onChange:e=>u(e.target.value),placeholder:"至少8位，包含字母和数字",required:!0}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:"密码至少8位，必须包含字母和数字"})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"确认密码"}),(0,r.jsx)("input",{type:"password",className:"input",value:p,onChange:e=>d(e.target.value),placeholder:"再次输入密码",required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"16px"},disabled:g,children:g?"注册中...":"注册"}),(0,r.jsxs)("div",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:["已有账号？"," ",(0,r.jsx)("a",{href:"/login",style:{color:"#0070f3",fontWeight:"500"},children:"立即登录"})]})]})]})})}},1837:function(e,t,n){"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("auth_token"),r={"Content-Type":"application/json",...t.headers||{}};n&&(r.Authorization="Bearer ".concat(n));let i=await fetch("".concat("https://moxiang-distill-api.masiqi.workers.dev").concat(e),{...t,headers:r});if(!i.ok)try{let e=await i.json();throw Error(e.error||e.message||"API错误: ".concat(i.statusText))}catch(e){throw Error("API错误: ".concat(i.statusText))}return i.json()}n.d(t,{h:function(){return i}});let i={register:e=>r("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)}),login:e=>r("/api/v1/auth/login",{method:"POST",body:JSON.stringify(e)}),getSources:()=>r("/api/v1/sources"),getPublicSources:()=>r("/api/v1/sources/public"),getContent:()=>r("/api/v1/content")}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6315)}),_N_E=e.O()}]);