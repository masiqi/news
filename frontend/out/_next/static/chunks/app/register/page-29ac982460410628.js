(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6315:function(e,t,n){Promise.resolve().then(n.bind(n,564))},9376:function(e,t,n){"use strict";var i=n(5475);n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})},564:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n(7437),r=n(2265),o=n(9376),a=n(1837);function s(){let e=(0,o.useRouter)(),[t,n]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[p,d]=(0,r.useState)(""),[g,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),f=async n=>{if(n.preventDefault(),h(""),c.length<8){h("密码至少需要8位字符");return}if(!/(?=.*[a-zA-Z])(?=.*\d)/.test(c)){h("密码必须包含字母和数字");return}if(c!==p){h("两次输入的密码不一致");return}m(!0);try{let n=await a.h.register({email:s,password:c,username:t});n.token?(localStorage.setItem("auth_token",n.token),e.push("/dashboard")):h("注册失败，请重试")}catch(e){h((null==e?void 0:e.message)||"注册失败，请检查网络连接"),console.error("Register error:",e)}finally{m(!1)}};return(0,i.jsx)("div",{className:"container",style:{maxWidth:"480px",paddingTop:"80px"},children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",textAlign:"center"},children:"注册"}),(0,i.jsx)("p",{style:{color:"#666",textAlign:"center",marginBottom:"32px"},children:"创建您的墨香蒸馏账号"}),g&&(0,i.jsx)("div",{style:{padding:"12px 16px",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"20px",fontSize:"14px"},children:g}),(0,i.jsxs)("form",{onSubmit:f,children:[(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"用户名"}),(0,i.jsx)("input",{type:"text",className:"input",value:t,onChange:e=>n(e.target.value),placeholder:"您的用户名",required:!0})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"邮箱"}),(0,i.jsx)("input",{type:"email",className:"input",value:s,onChange:e=>l(e.target.value),placeholder:"your@email.com",required:!0})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"密码"}),(0,i.jsx)("input",{type:"password",className:"input",value:c,onChange:e=>u(e.target.value),placeholder:"至少8位，包含字母和数字",required:!0}),(0,i.jsx)("p",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:"密码至少8位，必须包含字母和数字"})]}),(0,i.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"确认密码"}),(0,i.jsx)("input",{type:"password",className:"input",value:p,onChange:e=>d(e.target.value),placeholder:"再次输入密码",required:!0})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"16px"},disabled:x,children:x?"注册中...":"注册"}),(0,i.jsxs)("div",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:["已有账号？"," ",(0,i.jsx)("a",{href:"/login",style:{color:"#0070f3",fontWeight:"500"},children:"立即登录"})]})]})]})})}},1837:function(e,t,n){"use strict";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("auth_token"),i={"Content-Type":"application/json",...t.headers||{}};n&&(i.Authorization="Bearer ".concat(n));let r=await fetch("".concat("https://moxiang-distill-api.masiqi.workers.dev").concat(e),{...t,headers:i});if(!r.ok)try{let e=await r.json();throw Error(e.error||e.message||"API错误: ".concat(r.statusText))}catch(e){throw Error("API错误: ".concat(r.statusText))}return r.json()}n.d(t,{h:function(){return r}});let r={register:e=>i("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)}),login:e=>i("/api/v1/auth/login",{method:"POST",body:JSON.stringify(e)}),getSources:()=>i("/api/v1/sources"),getPublicSources:()=>i("/api/v1/sources/public"),getContent:e=>{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.set("pageSize",e.pageSize.toString());let n=t.toString();return i("/api/v1/content".concat(n?"?".concat(n):""))}}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6315)}),_N_E=e.O()}]);