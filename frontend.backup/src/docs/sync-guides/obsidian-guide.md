# Obsidian 同步配置指南

**平台**: Obsidian  
**版本**: 1.0  
**最后更新**: 2025-09-08

## 概述

本指南将帮助您配置 News-Sync 应用与 Obsidian 进行安全连接。通过使用生成的 R2 同步凭证，您可以将 AI 处理的新闻 Markdown 笔记安全地同步到您的 Obsidian 库中。

## 系统要求

### 必要条件
- Obsidian 版本 1.0.0 或更高
- News-Sync 账户（已创建）
- R2 同步凭证（已生成）
- 有效的网络连接

### 推荐配置
- 安装 `News Sync` 插件（从社区插件市场）
- 启用社区插件支持
- 配置自动同步功能

## 获取同步凭证

### 步骤 1: 登录 News-Sync
1. 打开您的网络浏览器
2. 访问 News-Sync 网站并登录您的账户
3. 进入"同步设置"页面

### 步骤 2: 创建 R2 凭证
1. 点击"创建新凭证"按钮
2. 为凭证输入名称（例如："我的 Obsidian 同步"）
3. 输入 R2 桶名称（如果系统未自动提供）
4. 选择合适的区域设置（默认为 "auto"）
5. 点击"创建凭证"按钮

### 步骤 3: 复制凭证信息
1. 在生成的凭证详情中，点击"复制完整信息"
2. 安全地保存这些信息，不要分享给他人
3. 特别关注以下信息：
   - Access Key ID
   - Secret Access Key
   - 区域（Region）
   - 桶名称（Bucket）

## 安装 News Sync 插件

### 步骤 1: 打开 Obsidian
启动您的 Obsidian 应用程序。

### 步骤 2: 访问插件市场
1. 点击设置图标（⚙️）打开设置
2. 选择"社区插件"选项卡
3. 点击"浏览"按钮打开插件市场

### 步骤 3: 搜索和安装插件
1. 在插件市场中搜索 "News Sync"
2. 找到官方 News Sync 插件
3. 点击"安装"按钮
4. 等待安装完成，然后启用插件
5. 重启 Obsidian 以应用插件更改

## 配置同步设置

### 步骤 1: 打开插件设置
1. 重启 Obsidian 后，再次打开设置（⚙️）
2. 选择"社区插件"选项卡
3. 在已安装插件列表中找到 "News Sync"
4. 点击插件右侧的"选项"按钮

### 步骤 2: 配置基本设置
在"设置"选项卡中：

```
- **启用同步**: [✓] 勾选以启用同步功能
- **同步频率**: 选择自动同步间隔
  - 建议：30分钟（适用于定期更新）
  - 可选：1小时（适用于较少更新）
  - 可选：手动同步（适用于完全控制）
- **自动启动同步**: [✓] 勾选以在启动时自动同步
- **同步失败重试**: [✓] 勾选以在失败时自动重试
```

### 步骤 3: 配置 R2 存储设置
在"存储"选项卡中：

```
- **存储类型**: [R2] 选择 Cloudflare R2
- **访问密钥 ID**: [输入您的 Access Key ID]
- **秘密访问密钥**: [输入您的 Secret Access Key]
- **区域**: [输入您的区域，通常为 "auto"]
- **端点**: [如果需要，输入自定义端点]
- **桶名称**: [输入您的 R2 桶名称]
- **存储路径**: [输入您的笔记存储路径，默认为 "/"]
- **只读模式**: [✓] 确保选择只读模式以保护数据安全
```

### 步骤 4: 配置内容过滤
在"内容过滤"选项卡中：

```
- **同步类型**: [AI 处理笔记] 选择只同步 AI 处理过的笔记
- **笔记格式**: [Markdown] 确保 Markdown 格式同步
- **包含标签**: [✓] 同步笔记的标签信息
- **包含 frontmatter**: [✓] 同步笔记的元数据
- **最大文件大小**: [10MB] 设置单个文件大小限制
- **排除文件夹**: [列出需要排除的文件夹]
```

### 步骤 5: 配置冲突解决
在"冲突解决"选项卡中：

```
- **冲突检测策略**: [文件修改时间] 基于文件修改时间
- **自动解决冲突**: [✓] 启用自动冲突解决
- **备份冲突文件**: [✓] 在解决冲突前创建备份
- **冲突通知**: [✓] 在发生冲突时显示通知
- **解决优先级**: [云端优先] 或 [本地优先] 根据需要选择
```

## 测试同步连接

### 步骤 1: 保存设置
1. 配置完所有设置后，点击"保存"按钮
2. Obsidian 会显示设置已保存的确认信息
3. 插件可能会提示重启以应用新设置

### 步骤 2: 手动触发同步
1. 在 Obsidian 中，按 `Ctrl+P`（Windows/Linux）或 `Cmd+P`（Mac）打开命令面板
2. 输入 "News Sync: force sync" 命令
3. 按 Enter 键执行手动同步
4. 观察同步进度和结果

### 步骤 3: 检查同步结果
1. 同步完成后，检查 Obsidian 库中的文件
2. 确认 AI 处理的新闻笔记已成功同步
3. 验证笔记的格式和内容是否正确
4. 检查是否所有标签和元数据都已正确同步

## 优化同步体验

### 设置自动同步
1. 在插件设置中，设置合适的同步频率
2. 建议：对于活跃用户，设置为 30 分钟
3. 对于不活跃的用户，设置为 1-2 小时
4. 或者设置为仅在特定时间同步

### 监控同步状态
1. 定期检查同步日志
2. 关注同步失败或错误提示
3. 确保凭证没有过期
4. 监控存储空间使用情况

### 优化网络使用
1. 避免在网络状况不佳时强制同步
2. 设置合理的重试间隔
3. 限制同时同步的文件数量
4. 考虑在低带宽环境下只同步必要的文件

## 常见问题解答

### Q: 同步失败并显示 "凭证无效" 错误
**A**: 这通常意味着您的 R2 凭证已过期或无效。请：
1. 登录 News-Sync 网站
2. 进入凭证管理页面
3. 重新生成您的同步凭证
4. 在 Obsidian 中更新为新的凭证信息

### Q: 同步过程中网络连接中断
**A**: 网络中断是常见问题。请：
1. 检查您的网络连接
2. 等待网络恢复后重试
3. 插件会自动重试失败的同步
4. 如果问题持续，请检查防火墙设置

### Q: 文件同步时出现冲突
**A**: 文件冲突通常发生在多个设备同时编辑时。请：
1. 查看冲突解决通知
2. 根据需要选择保留哪个版本
3. 系统会自动创建备份文件
4. 建议在不同设备上避免同时编辑相同文件

### Q: 存储空间不足
**A**: 如果出现存储空间不足错误：
1. 清理不需要的文件
2. 考虑升级您的存储计划
3. 在插件设置中设置文件大小限制
4. 排除大文件或不需要同步的文件

### Q: 同步速度很慢
**A**: 同步速度可能受多种因素影响：
1. 检查您的网络连接速度
2. 减少同时同步的文件数量
3. 优化文件大小和内容
4. 考虑在非高峰时段进行同步

### Q: 插件无法安装或启动
**A**: 如果遇到插件问题：
1. 确保 Obsidian 版本兼容
2. 重新安装插件
3. 检查 Obsidian 的控制台日志
4. 联系 News-Sync 支持团队获取帮助

## 安全最佳实践

### 凭证安全
- **不分享凭证**: 永远不要将您的 R2 凭证分享给他人
- **定期更换**: 建议每 3-6 个月更换一次凭证
- **安全存储**: 使用密码管理器安全存储凭证信息
- **立即撤销**: 如果怀疑凭证泄露，请立即撤销并重新生成

### 数据安全
- **只读模式**: 始终使用只读模式保护您的数据
- **定期备份**: 定期备份您的 Obsidian 库
- **访问控制**: 限制对同步设备的物理访问
- **网络加密**: 确保网络传输使用 HTTPS 加密

### 系统安全
- **更新软件**: 定期更新 Obsidian 和插件
- **监控日志**: 定期检查同步和错误日志
- **权限管理**: 定期检查并更新访问权限
- **审计跟踪**: 启用并定期审查访问日志

## 故障排除

### 连接问题
```
症状: 无法连接到 R2 服务
原因: 
  - 网络连接问题
  - 凭证配置错误
  - R2 服务不可用
解决方案:
  1. 检查网络连接
  2. 验证凭证信息
  3. 测试 R2 服务状态
  4. 重新配置连接设置
```

### 文件同步问题
```
症状: 文件无法同步或同步不完整
原因:
  - 文件权限问题
  - 文件大小限制
  - 存储空间不足
  - 文件名包含特殊字符
解决方案:
  1. 检查文件权限
  2. 调整文件大小限制
  3. 清理存储空间
  4. 重命名文件避免特殊字符
```

### 性能问题
```
症状: 同步速度慢或系统卡顿
原因:
  - 系统资源不足
  - 网络带宽限制
  - 文件数量过多
  - 插件配置问题
解决方案:
  1. 重启 Obsidian
  2. 优化同步设置
  3. 限制同步文件数量
  4. 更新系统和插件
```

### 插件问题
```
症状: 插件无法正常工作
原因:
  - 插件版本不兼容
  - 缺少必要依赖
  - 配置文件损坏
  - 系统权限问题
解决方案:
  1. 重新安装插件
  2. 检查插件兼容性
  3. 重置插件配置
  4. 检查系统权限
```

## 支持和帮助

### 获取帮助
- **官方文档**: 访问 News-Sync 官方网站获取详细文档
- **社区论坛**: 在 Obsidian 社区论坛寻求帮助
- **问题报告**: 通过 GitHub Issues 报告问题
- **邮件支持**: 联系 News-Sync 支持团队

### 版本更新
- **自动更新**: 启用插件自动更新以获取最新功能
- **更新日志**: 查看更新日志了解新功能和修复
- **版本兼容性**: 确保使用的版本相互兼容
- **测试版**: 如需测试新功能，可使用测试版本

### 反馈建议
- **功能请求**: 通过 GitHub 提出新功能请求
- **改进建议**: 分享您的使用经验和改进建议
- **错误报告**: 详细报告遇到的错误和问题
- **用户体验**: 参与用户体验改进调研

---

*本指南最后更新于 2025-09-08，版本 1.0。如需最新版本，请访问 News-Sync 官方网站。*